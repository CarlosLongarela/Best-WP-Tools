{"version":3,"sources":["general.js"],"names":["utils","translator","html","i","length","replacer","text","replace","str","g1","chrome","i18n","getMessage","trim","attributes","forEach","el","value","nodeType","data","childNodes","this","ajax","url","fn","request","XMLHttpRequest","onreadystatechange","readyState","response","open","responseType","send","create","htmlStr","frag","document","createDocumentFragment","temp","createElement","innerHTML","firstChild","appendChild","get_current_tab","self","tabs","query","active","currentWindow","substring","url_not_valid","fragment","console","log","getElementById","hide_div","show_div","div_id","style","display","show_hide_div","show_data_div","data_style","height","overflow","opacity","copy_text","select","execCommand","textContent","setTimeout","extract_hostname","indexOf","split"],"mappings":"AAAA,IAAIA,MAAQ,CACRC,WAAY,SAAUC,GAClB,aACA,IAAIC,EAAGC,EACP,SAASC,EAASC,GACd,OAAOA,EAAKC,QAAQ,uBAAwB,SAAUC,EAAKC,GACvD,OAAOC,OAAOC,KAAKC,WAAWH,EAAGI,SAAWL,IAUpD,GAPIN,EAAKY,YANuB,CAAC,QAAS,MAAO,cAAe,QAAS,QAOtDC,QAAQ,SAAUC,GACzBd,EAAKY,WAAWE,KAChBd,EAAKY,WAAWE,GAAIC,MAAQZ,EAASH,EAAKY,WAAWE,GAAIC,UAIjE,IAAMf,EAAKgB,SACXhB,EAAKiB,KAAOd,EAASH,EAAKiB,WAG1B,IAAKhB,EAAI,EAAGC,EAASF,EAAKkB,WAAWhB,OAAQD,EAAIC,EAAQD,IACrDkB,KAAKpB,WAAWC,EAAKkB,WAAWjB,KAI5CmB,KAAM,SAAUC,EAAKC,GACjB,aACA,IAAIC,EAAU,IAAIC,eAClBD,EAAQE,mBAAqB,WACrB,IAAMF,EAAQG,YACdJ,EAAGC,EAAQI,WAGnBJ,EAAQK,KAAK,MAAOP,GAAK,GACzBE,EAAQM,aAAe,OACvBN,EAAQO,QAEZC,OAAQ,SAAUC,GACd,IAAIC,EAAOC,SAASC,yBAA0BC,EAAOF,SAASG,cAAc,OAE5E,IADAD,EAAKE,UAAYN,EACVI,EAAKG,YACRN,EAAKO,YAAYJ,EAAKG,YAE1B,OAAON,GAEXQ,gBAAiB,SAAUnB,GACvB,aACA,IAAIoB,EAAOvB,KACXX,OAAOmC,KAAKC,MAAM,CAAEC,QAAU,EAAMC,eAAiB,GAAQ,SAAUH,GACjD,EAAdA,EAAKzC,OACD,SAAWyC,EAAK,GAAGtB,IAAI0B,UAAU,EAAG,GACpCL,EAAKM,gBAGL1B,EAAGqB,EAAK,IAIZD,EAAKM,mBAIjBA,cAAe,WACX,aACA,IAAIC,EAAW9B,KAAKY,OAAO,MAAQvB,OAAOC,KAAKC,WAAW,iBAAmB,UAAYF,OAAOC,KAAKC,WAAW,mBAAqB,2IACrIwC,QAAQC,IAAIF,GACZf,SAASkB,eAAe,UAAUZ,YAAYS,GAC9C9B,KAAKkC,SAAS,YACdlC,KAAKmC,SAAS,WAElBA,SAAU,SAAUC,GAChB,aACArB,SAASkB,eAAeG,GAAQC,MAAMC,QAAU,SAEpDJ,SAAU,SAAUE,GAChB,aACArB,SAASkB,eAAeG,GAAQC,MAAMC,QAAU,QAEpDC,cAAe,SAAUH,GACrB,aACsD,SAAlDrB,SAASkB,eAAeG,GAAQC,MAAMC,QACtCtC,KAAKmC,SAASC,GAGdpC,KAAKkC,SAASE,IAGtBI,cAAe,WACX,IAAIC,EAAa1B,SAASkB,eAAe,QAAQI,MACjDI,EAAWC,OAAS,OACpBD,EAAWE,SAAW,OACtBF,EAAWG,QAAU,KAEzBC,UAAW,SAAUT,GACjB,aACA,IAAIb,EAAOvB,KACIe,SAASkB,eAAeG,GAC9BU,SACT/B,SAASgC,YAAY,QACrBhC,SAASkB,eAAe,UAAUe,YAAc3D,OAAOC,KAAKC,WAAW,mBACvES,KAAKmC,SAAS,UACdc,WAAW,WACP1B,EAAKW,SAAS,WACf,MAEPgB,iBAAkB,SAAUhD,GACxB,aAUA,QAR0B,EAAtBA,EAAIiD,QAAQ,OACDjD,EAAIkD,MAAM,KAAK,GAGflD,EAAIkD,MAAM,KAAK,IAEVA,MAAM,KAAK,GACXA,MAAM,KAAK","file":"../general.min.js","sourcesContent":["var utils = {\n    translator: function (html) {\n        'use strict';\n        var i, length, attrs_to_check = ['title', 'alt', 'placeholder', 'value', 'href'];\n        function replacer(text) {\n            return text.replace(/\\{\\{([\\s\\S]*?)\\}\\}/gm, function (str, g1) {\n                return chrome.i18n.getMessage(g1.trim()) || str;\n            });\n        }\n        if (html.attributes) {\n            attrs_to_check.forEach(function (el) {\n                if (html.attributes[el]) {\n                    html.attributes[el].value = replacer(html.attributes[el].value);\n                }\n            });\n        }\n        if (3 === html.nodeType) {\n            html.data = replacer(html.data);\n        }\n        else {\n            for (i = 0, length = html.childNodes.length; i < length; i++) {\n                this.translator(html.childNodes[i]);\n            }\n        }\n    },\n    ajax: function (url, fn) {\n        'use strict';\n        var request = new XMLHttpRequest();\n        request.onreadystatechange = function () {\n            if (4 === request.readyState) {\n                fn(request.response);\n            }\n        };\n        request.open('GET', url, true);\n        request.responseType = 'json';\n        request.send();\n    },\n    create: function (htmlStr) {\n        var frag = document.createDocumentFragment(), temp = document.createElement('div');\n        temp.innerHTML = htmlStr;\n        while (temp.firstChild) {\n            frag.appendChild(temp.firstChild);\n        }\n        return frag;\n    },\n    get_current_tab: function (fn) {\n        'use strict';\n        var self = this;\n        chrome.tabs.query({ 'active': true, 'currentWindow': true }, function (tabs) {\n            if (tabs.length > 0) {\n                if ('http' !== tabs[0].url.substring(0, 4)) {\n                    self.url_not_valid();\n                }\n                else {\n                    fn(tabs[0]);\n                }\n            }\n            else {\n                self.url_not_valid();\n            }\n        });\n    },\n    url_not_valid: function () {\n        'use strict';\n        var fragment = this.create('<p>' + chrome.i18n.getMessage('msg_only_http') + '</p><p>' + chrome.i18n.getMessage('msg_2_only_http') + ' <a href=\"https://tabernawp.com/best-wordpress-tools\" target=\"_blank\" rel=\"noopener\">https://tabernawp.com/best-wordpress-tools</a></p>');\n        console.log(fragment);\n        document.getElementById('notice').appendChild(fragment);\n        this.hide_div('app_info');\n        this.show_div('notice');\n    },\n    show_div: function (div_id) {\n        'use strict';\n        document.getElementById(div_id).style.display = 'block';\n    },\n    hide_div: function (div_id) {\n        'use strict';\n        document.getElementById(div_id).style.display = 'none';\n    },\n    show_hide_div: function (div_id) {\n        'use strict';\n        if (document.getElementById(div_id).style.display === 'none') {\n            this.show_div(div_id);\n        }\n        else {\n            this.hide_div(div_id);\n        }\n    },\n    show_data_div: function () {\n        var data_style = document.getElementById('data').style;\n        data_style.height = 'auto';\n        data_style.overflow = 'auto';\n        data_style.opacity = '1';\n    },\n    copy_text: function (div_id) {\n        'use strict';\n        var self = this;\n        var copyText = document.getElementById(div_id);\n        copyText.select();\n        document.execCommand('copy');\n        document.getElementById('notice').textContent = chrome.i18n.getMessage('msg_text_copied');\n        this.show_div('notice');\n        setTimeout(function () {\n            self.hide_div('notice');\n        }, 4000);\n    },\n    extract_hostname: function (url) {\n        'use strict';\n        var hostname;\n        if (url.indexOf('://') > -1) {\n            hostname = url.split('/')[2];\n        }\n        else {\n            hostname = url.split('/')[0];\n        }\n        hostname = hostname.split(':')[0];\n        hostname = hostname.split('?')[0];\n        return hostname;\n    },\n};\n"]}